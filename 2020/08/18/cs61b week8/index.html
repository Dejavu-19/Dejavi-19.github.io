<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-loading-bar.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"dejavi-19.github.io","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#222","save":"manual"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="cs61b week8Disjoint SetsDynamic Connectivity ProblemIntroductionGiven a series of pairwise items connectedness declarations, determine if two items are connected. Two operations:  connect(p, q): Conne">
<meta property="og:type" content="article">
<meta property="og:title" content="cs61b week8">
<meta property="og:url" content="https://dejavi-19.github.io/2020/08/18/cs61b%20week8/index.html">
<meta property="og:site_name" content="Dejavu&#39;s Notebook">
<meta property="og:description" content="cs61b week8Disjoint SetsDynamic Connectivity ProblemIntroductionGiven a series of pairwise items connectedness declarations, determine if two items are connected. Two operations:  connect(p, q): Conne">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/naive-approach.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/better-approach.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/quickfindds.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/quds-worse-case.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/path-compression.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/tree.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/rooted-binary-tree.png">
<meta property="og:image" content="https://camo.githubusercontent.com/c652bca7dd3dc91267e77b8eeeaf374f03a65b49/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30322d3238253230617425323031322e35392e3339253230414d2e706e67">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/binary-search-tree.png">
<meta property="og:image" content="https://camo.githubusercontent.com/892cb1ffa6202e8ec5739c5023dd7108e79788d3/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30322d3238253230617425323031302e33352e3536253230414d2e706e67">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/case3-delete.png">
<meta property="og:image" content="https://camo.githubusercontent.com/6004e76c225bdc924086e8229210f2454c693cac/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30322d3238253230617425323031302e34332e3435253230414d2e706e67">
<meta property="og:image" content="https://camo.githubusercontent.com/423fd262e527583ea0c1fa138fb987dfb4459fe0/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30332d3035253230617425323031322e35362e3534253230504d2e706e67">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/bushy-vs-spindly.png">
<meta property="og:image" content="https://camo.githubusercontent.com/a83a6f1d3c0b41e33438c490e327e50974ac3921/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30332d3036253230617425323031302e32352e3138253230504d2e706e67">
<meta property="og:image" content="https://camo.githubusercontent.com/7323fe83cb3695e301405b8d126fe22ad3882c1d/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30332d3036253230617425323031302e33372e3137253230504d2e706e67">
<meta property="og:image" content="https://camo.githubusercontent.com/4de78376bcc4c62debe487911de4af0f35ea7269/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30332d30352532306174253230342e31322e3137253230504d2e706e67">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/overstuff-problem.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/juicy-tree.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/capped-tree.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/juicy-tree.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/split-node.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/juicy-tree-2.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/split-node-2.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/chain-reaction.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/juicy-root.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/split-root.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/b-trees.png">
<meta property="og:image" content="https://camo.githubusercontent.com/d59e7282bf26538f9f4c84e03ab97d277f8331f6/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30332d3036253230617425323031302e35362e3531253230504d2e706e67">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/representing-2-3-tree-1.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/representing-2-3-tree-2.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/2-3-tree.png">
<meta property="og:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/llrb.png">
<meta property="article:published_time" content="2020-08-18T04:42:47.843Z">
<meta property="article:modified_time" content="2020-08-20T14:52:46.844Z">
<meta property="article:author" content="Dejavu">
<meta property="article:tag" content="cs">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/naive-approach.png">

<link rel="canonical" href="https://dejavi-19.github.io/2020/08/18/cs61b%20week8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>cs61b week8 | Dejavu's Notebook</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
	<a href="https://github.com/Dejavu-19" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Dejavu's Notebook</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Alea iacta est</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首&emsp;&emsp;页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于博主</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标&emsp;&emsp;签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分&emsp;&emsp;类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归&emsp;&emsp;档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://dejavi-19.github.io/2020/08/18/cs61b%20week8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/v2-f8df7dc974a522b119a385a0fc09311e_xll.jpg">
      <meta itemprop="name" content="Dejavu">
      <meta itemprop="description" content="Stay gold">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Dejavu's Notebook">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          cs61b week8
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-08-18 13:42:47" itemprop="dateCreated datePublished" datetime="2020-08-18T13:42:47+09:00">2020-08-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-08-20 23:52:46" itemprop="dateModified" datetime="2020-08-20T23:52:46+09:00">2020-08-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cs61b/" itemprop="url" rel="index"><span itemprop="name">cs61b</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="cs61b-week8"><a href="#cs61b-week8" class="headerlink" title="cs61b week8"></a>cs61b week8</h1><h1 id="Disjoint-Sets"><a href="#Disjoint-Sets" class="headerlink" title="Disjoint Sets"></a>Disjoint Sets</h1><h2 id="Dynamic-Connectivity-Problem"><a href="#Dynamic-Connectivity-Problem" class="headerlink" title="Dynamic Connectivity Problem"></a>Dynamic Connectivity Problem</h2><h3 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h3><p>Given a series of pairwise items connectedness declarations, determine if two items are connected. Two operations:</p>
<ul>
<li><code>connect(p, q)</code>: Connect items <code>p</code> and <code>q</code></li>
<li><code>isConnected(p, q)</code>: Are <code>p</code> and <code>q</code> connected ?</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ds = DisjointSets(<span class="number">7</span>)</span><br><span class="line">ds.connect(<span class="number">0</span>, <span class="number">1</span>)</span><br><span class="line">ds.connect(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">ds.connect(<span class="number">0</span>, <span class="number">4</span>)</span><br><span class="line">ds.connect(<span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line">ds.isConnected(<span class="number">2</span>, <span class="number">4</span>) <span class="comment">// true</span></span><br><span class="line">ds.isConnected(<span class="number">3</span>, <span class="number">0</span>) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">ds.connect(<span class="number">4</span>, <span class="number">2</span>)</span><br><span class="line">ds.connect(<span class="number">4</span>, <span class="number">6</span>)</span><br><span class="line">ds.connect(<span class="number">3</span>, <span class="number">6</span>)</span><br><span class="line">ds.isConnected(<span class="number">3</span>, <span class="number">0</span>) <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<h3 id="Disjoint-Set-ADT"><a href="#Disjoint-Set-ADT" class="headerlink" title="Disjoint Set ADT"></a>Disjoint Set ADT</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">DisjointSets</span> </span>&#123;</span><br><span class="line">	<span class="comment">/** Connects two items P and Q. */</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">connect</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span></span>;</span><br><span class="line"> </span><br><span class="line">	<span class="comment">/** Checks to see if two items are connected. */</span></span><br><span class="line">	<span class="function"><span class="keyword">boolean</span> <span class="title">isConnected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<a id="more"></a>

<p>We will implement this interface to achieve these goals:</p>
<ul>
<li>Number of elements N can be huge.</li>
<li>Number of method calls M can be huge.</li>
<li>Calls to methods may be interspersed</li>
</ul>
<h4 id="Naive-Approach"><a href="#Naive-Approach" class="headerlink" title="Naive Approach:"></a>Naive Approach:</h4><p>Record all the connections in a data structure, and do some iteration to see if one thing can be reached from each other. </p>
<ul>
<li><a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/naive-approach.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/naive-approach.png" alt="naive-approach"></a></li>
</ul>
<h4 id="Better-Approach"><a href="#Better-Approach" class="headerlink" title="Better Approach:"></a>Better Approach:</h4><p>Model connectedness in terms of <strong><code>sets</code></strong></p>
<ul>
<li><a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/better-approach.png" target="_blank" rel="noopener"><br><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/better-approach.png" alt="better-approach"></a></li>
</ul>
<h3 id="Quick-Find"><a href="#Quick-Find" class="headerlink" title="Quick Find"></a>Quick Find</h3><p><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/quickfindds.png" alt="quickfindds"></p>
<p>To find whether two items are connected, here are two ways:</p>
<ol>
<li>List of sets of integers.</li>
</ol>
<p>Very inituitive way, but quite slow for large N.</p>
<ol>
<li>List of integers where ith entry gives set number.</li>
</ol>
<p>connect(p, q): Change entries that equal id[p] to id[q]</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickFindDS</span> <span class="keyword">implements</span> <span class="title">DisjointSets</span> </span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span>[] id;</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">QuickFindDS</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">      id = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">         id[i] = i;</span><br><span class="line">      &#125;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isConnected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;  <span class="comment">//judge if the id is same</span></span><br><span class="line">      <span class="keyword">return</span> id[p] == id[q];</span><br><span class="line">	&#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">connect</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;   <span class="comment">//change id to the same</span></span><br><span class="line">      <span class="keyword">int</span> pid = id[p];</span><br><span class="line">      <span class="keyword">int</span> qid = id[q];</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; id.length; i++) &#123;</span><br><span class="line">         <span class="keyword">if</span> (id[i] == pid) &#123;</span><br><span class="line">            id[i] = qid;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Performance Issue, connecting is still slow.</p>
<h3 id="Quick-Union"><a href="#Quick-Union" class="headerlink" title="Quick Union"></a>Quick Union</h3><p>Instead of using random number to represent the index of sets, we could let each entry to be its parent, which results in a tree-like shape.</p>
<p>To connect two items, simply change the root of one item to the root of another item.</p>
<p>However, this method is still slow since the tree might be quite tall and the cost of the worst case is proportional to the height.</p>
<h3 id="Weighted-Quick-Union"><a href="#Weighted-Quick-Union" class="headerlink" title="Weighted Quick Union"></a>Weighted Quick Union</h3><p>We could modify Quick Union to avoid tall trees: Track tree size and link root of smaller tree to the larger one.</p>
<p>Thus, the <code>connect</code> and <code>isConnected</code> operation will never be slower than <code>log N</code>, which is fast enough for most programs.</p>
<p>Although we could track the height instead of weight, we will find out that the performance is similar.</p>
<table>
<thead>
<tr>
<th>operation</th>
<th>connected component</th>
</tr>
</thead>
<tbody><tr>
<td><code>connect(4, 3)</code> <code>connect(3, 2)</code> <code>connect(2, 1)</code> <code>connect(1, 0)</code></td>
<td>{&gt;&gt;img&lt;&lt;}<a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/quds-worse-case.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/quds-worse-case.png" alt="img"></a></td>
</tr>
</tbody></table>
<p>Results in potentially even worse performance than <code>QuickFindDS</code> if tree is imbalanced</p>
<p>Performance Issue, tree can get too tall !</p>
<h3 id="Performance-Summary"><a href="#Performance-Summary" class="headerlink" title="Performance Summary"></a>Performance Summary</h3><table>
<thead>
<tr>
<th>Implementation</th>
<th>Constructor</th>
<th>connect</th>
<th>isConnected</th>
</tr>
</thead>
<tbody><tr>
<td><code>QuickFindDS</code></td>
<td>$\Theta(N)$</td>
<td>$\Theta(N)$</td>
<td>$\Theta(1)$</td>
</tr>
<tr>
<td><code>QuickUnionDS</code></td>
<td>$\Theta(N)$</td>
<td>$O(N)$</td>
<td>$O(N)$</td>
</tr>
<tr>
<td><code>WeightedQuickUnionDS</code></td>
<td>$\Theta(N)$</td>
<td>$O(\log N)$</td>
<td>$O(\log N)$</td>
</tr>
</tbody></table>
<p>Running $M$ operations on a <code>DisJointSet</code> object with $N$ elements</p>
<ul>
<li>Runtimes goes from $O(MN)$ to $O(N + M \log N)$</li>
<li>For $N = 10^9$ and $M = 10^9$, time to run goes from 30 years to 6 seconds<ul>
<li>Good data structure unlocks solutions to problems that could otherwise not be solved !</li>
</ul>
</li>
</ul>
<h3 id="Appendix-Weighted-QuickUnion-DS-With-Path-Compression"><a href="#Appendix-Weighted-QuickUnion-DS-With-Path-Compression" class="headerlink" title="Appendix - Weighted QuickUnion DS With Path Compression"></a>Appendix - Weighted QuickUnion DS With Path Compression</h3><p>Below is the topology of the worst case if we use <code>WeightedQuickUnionDS</code></p>
<ul>
<li><p>Clever idea: When we do</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">isConnected(<span class="number">15</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure>

<p>, tie all nodes seen to the root</p>
<ul>
<li>Additional cost is insignificant (same order of growth)</li>
</ul>
</li>
</ul>
<p><a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/path-compression.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/path-compression.png" alt="path-compression"></a></p>
<p>Path compression results in a <code>connect</code> / <code>isConnected</code> operations that are very close to amortized constant time</p>
<ul>
<li>$M$ operations on $N$ nodes is $O(N + M \lg^* N)$<ul>
<li>$\lg^*$ is less than $5$ for any realistic input</li>
</ul>
</li>
<li>A tighter bound: $O(N + M \alpha(N))$, where $\alpha$ is the inverse Ackermann function<ul>
<li>$\alpha$ is less than $5$ for all practical input !</li>
</ul>
</li>
</ul>
<h2 id="ADTs-Sets-Maps-BSTs"><a href="#ADTs-Sets-Maps-BSTs" class="headerlink" title="ADTs, Sets, Maps, BSTs"></a>ADTs, Sets, Maps, BSTs</h2><h3 id="Abstract-Data-Type"><a href="#Abstract-Data-Type" class="headerlink" title="Abstract Data Type"></a>Abstract Data Type</h3><p>An Abstract Data Type (ADT) is defined only by its operations, not by its implementation. </p>
<p>For instance, we say that <code>ArrayDeque</code> and <code>LinkedListDeque</code> are implementations of the <code>Deque</code> ADT. </p>
<p>Here are a few commonly used ADTs.</p>
<h4 id="Stacks"><a href="#Stacks" class="headerlink" title="Stacks:"></a><strong>Stacks</strong>:</h4><p>Structures that support last-in first-out retrieval of elements</p>
<ul>
<li>push(int x): puts x on the top of the stack</li>
<li>int pop(): takes the element on the top of the stack</li>
</ul>
<h4 id="Lists"><a href="#Lists" class="headerlink" title="Lists:"></a><strong>Lists</strong>:</h4><p>an ordered set of elements</p>
<ul>
<li>add(int i): adds an element</li>
<li>int get(int i): gets element at index i</li>
</ul>
<h4 id="Sets"><a href="#Sets" class="headerlink" title="Sets:"></a><strong>Sets</strong>:</h4><p>an unordered set of unique elements (no repeats)</p>
<ul>
<li>add(int i): adds an element</li>
<li>contains(int i): returns a boolean for whether or not the set contains the value</li>
</ul>
<h4 id="Maps"><a href="#Maps" class="headerlink" title="Maps:"></a><strong>Maps</strong>:</h4><p>set of key/value pairs</p>
<ul>
<li>put(K key, V value): puts a key value pair into the map</li>
<li>V get(K key): gets the value corresponding to the key</li>
</ul>
<h1 id="Tree"><a href="#Tree" class="headerlink" title="Tree"></a>Tree</h1><p>A tree consists of:</p>
<ul>
<li>A set of nodes</li>
<li>A set of deges that connect those nodes<ul>
<li>Constraint: There is exactly one path between any two nodes</li>
</ul>
</li>
</ul>
<p><a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/tree.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/tree.png" alt="tree"></a></p>
<p>Rooted (Binary) Trees</p>
<p>A rooted tree contains one node called the root:</p>
<ul>
<li>Every node except the root has exactly one parent, defined as the first node on the path from the node to the root</li>
<li>A node with no child is called a leaf</li>
</ul>
<p>A rooted binary tree, every node has either 0, 1, or 2 children (subtrees)</p>
<p><a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/rooted-binary-tree.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/rooted-binary-tree.png" alt="rooted-binary-tree"></a></p>
<h2 id="Binary-Search-Trees"><a href="#Binary-Search-Trees" class="headerlink" title="Binary Search Trees"></a>Binary Search Trees</h2><p><strong><code>LinkedList</code></strong> is <strong><code>unefficient in searching for items</code></strong> since it will cost linear time even if the list is sorted.</p>
<p>We can optimize by adding pointers to the middle of each recursive half of the linked list. </p>
<p>The structure is called a <strong>binary tree</strong>.</p>
<p><a href="https://camo.githubusercontent.com/c652bca7dd3dc91267e77b8eeeaf374f03a65b49/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30322d3238253230617425323031322e35392e3339253230414d2e706e67" target="_blank" rel="noopener"><img src="https://camo.githubusercontent.com/c652bca7dd3dc91267e77b8eeeaf374f03a65b49/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30322d3238253230617425323031322e35392e3339253230414d2e706e67" alt="BST"></a></p>
<h3 id="Properties-of-trees"><a href="#Properties-of-trees" class="headerlink" title="Properties of trees"></a>Properties of trees</h3><p>A <strong><code>BST</code></strong>(binary search tree) is <strong><code>a rooted binary tree</code></strong> with the <strong><code>BST property</code></strong>:</p>
<ul>
<li>BST Property:<ul>
<li>Given a node X in the tree:<ul>
<li>Every key in the <strong><code>left</code></strong> subtree is <strong><code>less</code></strong> than <code>X</code>‘s key</li>
<li>Every key in the <strong><code>right</code></strong> subtree is <strong><code>greater</code></strong> than <code>X</code>‘s key</li>
</ul>
</li>
<li>Ordering must be complete, transitive, and antisymmetric. Given keys p and q :<ul>
<li>Exactly one of <code>p &lt; q</code> and <code>q &lt; p</code> are true</li>
<li><code>p &lt; q</code> and <code>q &lt; r</code> imply <code>p &lt; r</code></li>
</ul>
</li>
<li>One consequence of these rules: <strong><code>No duplicate</code></strong> keys allowed !</li>
</ul>
</li>
</ul>
<p><a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/binary-search-tree.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/binary-search-tree.png" alt="binary-search-tree"></a></p>
<p>Trees are composed of:</p>
<ul>
<li>nodes</li>
<li>edges that connect those nodes. (Only one path between any two nodes.)</li>
</ul>
<p>In some trees, we select a <strong><code>root</code></strong> node which is a node that has no parents.</p>
<p>Tree also has <strong><code>leaves</code></strong>, which are nodes with no children.</p>
<h4 id="Binary-Trees"><a href="#Binary-Trees" class="headerlink" title="Binary Trees:"></a>Binary Trees:</h4><p>In addition to the above requirements, also hold the binary property constraint that each node has either 0, 1, or 2 children.</p>
<h4 id="Binary-Search-Trees-1"><a href="#Binary-Search-Trees-1" class="headerlink" title="Binary Search Trees:"></a>Binary Search Trees:</h4><p>For each node X in a binary tree:</p>
<ul>
<li>Every key in the left subtree is less than X’s key.</li>
<li>Every key in the right subtree is greater than X’s key.</li>
</ul>
<p>Here’s a simple BST class:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">BST</span>&lt;<span class="title">Key</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Key key;</span><br><span class="line">    <span class="keyword">private</span> BST left;</span><br><span class="line">    <span class="keyword">private</span> BST right;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BST</span><span class="params">(Key key, BST left, BST Right)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">        <span class="keyword">this</span>.left = left;</span><br><span class="line">        <span class="keyword">this</span>.right = right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">BST</span><span class="params">(Key key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Search"><a href="#Search" class="headerlink" title="Search"></a>Search</h3><p>If <code>searchKey</code> equals <code>label</code> return:</p>
<ul>
<li>If <code>searchKey &lt; label</code>, search left tree</li>
<li>If <code>searchKey &gt; label</code>, search right tree</li>
<li>Repeat recursively until we find the item or we get to the leaf of the tree, which means that the tree does not contain the item we want to find.</li>
</ul>
<p>The worst case runtime for “bushy” BST: $\Theta(\log N)$ ($N$ is the number of nodes in tree), the height of the tree is <code>log N</code>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> BST <span class="title">find</span><span class="params">(BST T, Key sk)</span> </span>&#123;</span><br><span class="line">   <span class="keyword">if</span> (T == <span class="keyword">null</span>)  <span class="comment">//edge case</span></span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">   <span class="keyword">if</span> (sk.equals(T.key))</span><br><span class="line">      <span class="keyword">return</span> T;</span><br><span class="line">   <span class="keyword">else</span> <span class="keyword">if</span> (sk ≺ T.key)</span><br><span class="line">      <span class="keyword">return</span> find(T.left, sk);</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">      <span class="keyword">return</span> find(T.right, sk);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Insert"><a href="#Insert" class="headerlink" title="Insert"></a>Insert</h3><p>We always insert at a leaf node.</p>
<ul>
<li>Search the item in the tree. If we find it, then we don’t do anything.</li>
<li>We can just add the new element to either the left or right of the leaf, preserving the BST property.</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> BST <span class="title">insert</span><span class="params">(BST T, Key ik)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (T == <span class="keyword">null</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> BST(ik);</span><br><span class="line">  <span class="keyword">if</span> (ik ≺ T.key)</span><br><span class="line">    T.left = insert(T.left, ik);</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (ik ≻ T.key)</span><br><span class="line">    T.right = insert(T.right, ik);</span><br><span class="line">  <span class="keyword">return</span> T;  <span class="comment">//需要返回插入ik后的T树</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h3><h4 id="3-cases"><a href="#3-cases" class="headerlink" title="3 cases:"></a>3 cases:</h4><ol>
<li>Deletion key has no children</li>
<li>Deletion key has one child</li>
<li>Deletion key has two children</li>
</ol>
<p>Case 1, 2 are easy and all we need to do is just to manipulate references</p>
<ul>
<li>Then the garbage collector cleans discarded variables</li>
</ul>
<h4 id="case-1-No-children"><a href="#case-1-No-children" class="headerlink" title="case 1: No children"></a>case 1: No children</h4><p>If the node has no children, it is a leaf, and we can just delete its parent pointer and the node will eventually be swept away by the garbage collector.</p>
<h4 id="case-2-1-child"><a href="#case-2-1-child" class="headerlink" title="case 2: 1 child"></a>case 2: 1 child</h4><p>If the node only has one child, we know that the child maintains the BST property with the parent of the node because the property is recursive to the right and left subtrees.</p>
<p>Therefore, we can just reassign the parent’s child pointer to the node’s child and the node will eventually be garbage collected.</p>
<p><a href="https://camo.githubusercontent.com/892cb1ffa6202e8ec5739c5023dd7108e79788d3/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30322d3238253230617425323031302e33352e3536253230414d2e706e67" target="_blank" rel="noopener"><img src="https://camo.githubusercontent.com/892cb1ffa6202e8ec5739c5023dd7108e79788d3/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30322d3238253230617425323031302e33352e3536253230414d2e706e67" alt="Delete 1 child"></a></p>
<h4 id="case-3-2-children"><a href="#case-3-2-children" class="headerlink" title="case 3: 2 children"></a>case 3: 2 children</h4><table>
<thead>
<tr>
<th>Example: delete “dog”</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>Goal: - Find a new root node - Must be larger than everything in the left subtree - Must be smaller than everything in the right subtree</td>
<td>{&gt;&gt;Image&lt;&lt;} <a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/case3-delete.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/case3-delete.png" alt="img"></a></td>
</tr>
</tbody></table>
<p>Would <code>bag</code> work ?: No !!</p>
<p>Choose either <code>cat</code> or <code>elf</code>:</p>
<ul>
<li>Delete cat or elf, and stick new copy in the root position<ul>
<li>This deletion guaranteed to be either case 0 or 2:<ul>
<li>Because they are always the biggest node in the left or the smallest node in the right</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>This deletion operation is called Hibbard deletion.</p>
<p>If the deleted node has two chldren, we choose a new node to replace the deleted one.</p>
<p>We know that the new node must be:</p>
<ul>
<li>larger than everything in left subtree.</li>
<li>smaller than everything right subtree.</li>
</ul>
<p>We can just take the right-most node in the left subtree or the left-most node in the right subtree. The method is called Hibbard deletion.</p>
<p><a href="https://camo.githubusercontent.com/6004e76c225bdc924086e8229210f2454c693cac/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30322d3238253230617425323031302e34332e3435253230414d2e706e67" target="_blank" rel="noopener"><img src="https://camo.githubusercontent.com/6004e76c225bdc924086e8229210f2454c693cac/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30322d3238253230617425323031302e34332e3435253230414d2e706e67" alt="Delete 2 children"></a></p>
<h3 id="BSTs-as-Sets-and-Maps"><a href="#BSTs-as-Sets-and-Maps" class="headerlink" title="BSTs as Sets and Maps"></a>BSTs as Sets and Maps</h3><p>We can use BST to implement <code>Set</code> ADT, which is better than using ArraySet, since the worst-case runtime cost <code>log N</code> is faster than <code>N</code>.</p>
<p>We can also implement <code>Map</code> with BST by having each node hold (key,value) pairs. We will compare each element’s key to determine where to place it within our tree.</p>
<h3 id="Height-of-BST"><a href="#Height-of-BST" class="headerlink" title="Height of BST"></a>Height of BST</h3><ul>
<li>Worst case: <code>Theta(N)</code></li>
<li>Best case: <code>Theta(log N)</code></li>
</ul>
<p><a href="https://camo.githubusercontent.com/423fd262e527583ea0c1fa138fb987dfb4459fe0/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30332d3035253230617425323031322e35362e3534253230504d2e706e67" target="_blank" rel="noopener"><img src="https://camo.githubusercontent.com/423fd262e527583ea0c1fa138fb987dfb4459fe0/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30332d3035253230617425323031322e35362e3534253230504d2e706e67" alt="Height of BST "></a></p>
<p>O is just an upper bound, rather than the worst case. </p>
<p>However, many people use O as a shorthand for worst case.</p>
<h3 id="BST-Performance"><a href="#BST-Performance" class="headerlink" title="BST Performance"></a>BST Performance</h3><p>Height varies dramatically between “bushy” and “spindly” trees:</p>
<ul>
<li>Height of “bushy”: $\Theta(\log N)$</li>
<li>height of “spindly”: $\Theta(N)$</li>
</ul>
<p><a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/bushy-vs-spindly.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/bushy-vs-spindly.png" alt="bushy-vs.-spindly"></a></p>
<h3 id="Random-Insertion"><a href="#Random-Insertion" class="headerlink" title="Random Insertion"></a>Random Insertion</h3><p><strong>Nice property</strong>: Random insertions take on average only $\Theta(\log N)$ each</p>
<p><strong>Comparison counting</strong>: If $N$ distinct keys are inserted into a BST, the expected average number of compares per insert is $C(N) \sim 2 \ln N = \Theta(\log N)$</p>
<p><strong>Tree height</strong>: If $N$ distinct keys are inserted in random order, expected tree height is $H(N) \sim 4.311 \ln N$</p>
<h3 id="Random-Deletion"><a href="#Random-Deletion" class="headerlink" title="Random Deletion"></a>Random Deletion</h3><p><strong>Surprising Fact</strong>: Tree will get imbalanced !: $C(N) \sim \sqrt{N}$ per operation (Finding a simple and efficient delete operation for BSTs is still an open problem)</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>Binary search tree: Efficient data structures for supporting insertion and search</p>
<ul>
<li>Operations on “bushy” BSTs are logarithmic time</li>
<li>Insertion of random data yields a bushy BST<ul>
<li>On random data, order of growth for get/put operations is logarithmic</li>
</ul>
</li>
</ul>
<p>Performance issues:</p>
<ul>
<li>“Spindly” trees have linear performance</li>
<li>Hibbard deletion results in order of growth $\sqrt{N}$<ul>
<li>Nobody knows how to do better on simple BSTs</li>
</ul>
</li>
</ul>
<h1 id="Balanced-Search-Tree"><a href="#Balanced-Search-Tree" class="headerlink" title="Balanced Search Tree"></a>Balanced Search Tree</h1><p>BST have potential performance issue if it get “spindly” (too tall)</p>
<ul>
<li>Worst case: Items inserted in order</li>
</ul>
<p>One solution:</p>
<ul>
<li>Insert in random order: Results in $\Theta(\log N)$ height with extremely high probability</li>
<li>But might not have all the data up front</li>
</ul>
<h3 id="Rotating-Trees"><a href="#Rotating-Trees" class="headerlink" title="Rotating Trees"></a>Rotating Trees</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rotateLeft(G): Say x is the right child of G. Make G the <span class="keyword">new</span> left child of x.</span><br><span class="line"></span><br><span class="line">rotateRight(G): Say x is the left child of G. Make G the <span class="keyword">new</span> right child of x.</span><br></pre></td></tr></table></figure>

<p>Below is a graphical description of what happens in a left rotation on the node G.</p>
<p><a href="https://camo.githubusercontent.com/a83a6f1d3c0b41e33438c490e327e50974ac3921/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30332d3036253230617425323031302e32352e3138253230504d2e706e67" target="_blank" rel="noopener"><img src="https://camo.githubusercontent.com/a83a6f1d3c0b41e33438c490e327e50974ac3921/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30332d3036253230617425323031302e32352e3138253230504d2e706e67" alt="Rotating Left"></a></p>
<p>We could also <strong><code>rotate a non-root node</code></strong>.</p>
<p><a href="https://camo.githubusercontent.com/7323fe83cb3695e301405b8d126fe22ad3882c1d/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30332d3036253230617425323031302e33372e3137253230504d2e706e67" target="_blank" rel="noopener"><img src="https://camo.githubusercontent.com/7323fe83cb3695e301405b8d126fe22ad3882c1d/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30332d3036253230617425323031302e33372e3137253230504d2e706e67" alt="None Root Node"></a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">rotateRight</span><span class="params">(Node h)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// assert (h != null) &amp;&amp; isRed(h.left);</span></span><br><span class="line">    Node x = h.left;</span><br><span class="line">    h.left = x.right;</span><br><span class="line">    x.right = h;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// make a right-leaning link lean to the left</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">rotateLeft</span><span class="params">(Node h)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// assert (h != null) &amp;&amp; isRed(h.right);</span></span><br><span class="line">    Node x = h.right;</span><br><span class="line">    h.right = x.left;</span><br><span class="line">    x.left = h;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="B-Tree"><a href="#B-Tree" class="headerlink" title="B-Tree"></a>B-Tree</h2><p><a href="https://camo.githubusercontent.com/4de78376bcc4c62debe487911de4af0f35ea7269/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30332d30352532306174253230342e31322e3137253230504d2e706e67" target="_blank" rel="noopener"><img src="https://camo.githubusercontent.com/4de78376bcc4c62debe487911de4af0f35ea7269/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30332d30352532306174253230342e31322e3137253230504d2e706e67" alt="2-3-4 Tree"></a></p>
<p>The tree showed above is called <strong><code>B-Tree</code></strong> or <strong><code>2-3-4 Tree</code></strong>. </p>
<p>2-3-4 and 2-3 refer to <strong>the number of children each node can have</strong>.</p>
<p>The process of adding a node to a 2-3-4 tree is:</p>
<ul>
<li>Similar to BST, we compare new item with each node in the tree and insert it into the leaf node.</li>
<li>If the node has 4 items, pop up the middle left item and re-arrange the children accordingly.</li>
<li>If the parent node having 4 nodes, pop up the middle left node again, rearranging the children accordingly.</li>
<li>Repeat this process until the parent node can accommodate or you get to the root.</li>
</ul>
<h3 id="B-tree-Runtime-Analysis"><a href="#B-tree-Runtime-Analysis" class="headerlink" title="B-tree Runtime Analysis"></a>B-tree Runtime Analysis</h3><p>The worst case runtime of searching a B-tree:</p>
<ul>
<li>Each node had the maximum number of elements</li>
<li>Traverse all the way to bottom</li>
</ul>
<p>The amount of operations will be <code>L log N</code>. Since <code>L</code> is constant, the runtime is <code>O(log N)</code>. B-tree is complex, but it could handle insertion operations in any order.</p>
<h3 id="Search-Trees"><a href="#Search-Trees" class="headerlink" title="Search Trees"></a>Search Trees</h3><p>There are many types of <strong>search trees</strong>:</p>
<ul>
<li><p>Binary Search Tree</p>
<p>: Require rotations to maintain balance. There are many strategies for rotation:</p>
<ul>
<li>AVL, weight-balancing, <strong>Red-Black</strong></li>
</ul>
</li>
<li><p>Treap</p>
</li>
<li><p>Splay Tree</p>
</li>
<li><p><strong>B-Trees (e.g.: 2-3 / 2-3-4 Tree)</strong>: No rotation required</p>
</li>
</ul>
<h6 id="Why-B-Tree"><a href="#Why-B-Tree" class="headerlink" title="Why B-Tree ?"></a>Why B-Tree ?</h6><p>Intriguingly, a deep understanding of B-Tree also provides a rotation strategy for BST called <strong>Red-Black</strong></p>
<h3 id="Road-to-Splitting-Tree-A-K-A-B-Tree"><a href="#Road-to-Splitting-Tree-A-K-A-B-Tree" class="headerlink" title="Road to Splitting Tree (A.K.A. B-Tree)"></a>Road to Splitting Tree (A.K.A. B-Tree)</h3><h4 id="Overstuff-Nodes"><a href="#Overstuff-Nodes" class="headerlink" title="Overstuff Nodes"></a>Overstuff Nodes</h4><p>The problem is adding new leaves:</p>
<ul>
<li>Solution 1: Overstuff the leaf nodes !<ul>
<li>“Overstuffed” tree always has balanced height, because leaf depths never change: Height is just max depth</li>
</ul>
</li>
</ul>
<p><strong>New problem</strong>: Leaf nodes can get too juicy <a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/overstuff-problem.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/overstuff-problem.png" alt="overstuff-problem"></a></p>
<h4 id="Cap-Nodes"><a href="#Cap-Nodes" class="headerlink" title="Cap Nodes"></a>Cap Nodes</h4><p>Set a cap on the number of items, say 3:</p>
<ul>
<li>If more than cap,</li>
</ul>
<p>  give an item to parent</p>
<ul>
<li>Which one ?: Whatever, let’s say the left-middle</li>
</ul>
<table>
<thead>
<tr>
<th>Juicy</th>
<th>Capped</th>
</tr>
</thead>
<tbody><tr>
<td>{&gt;&gt;Image&lt;&lt;}<a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/juicy-tree.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/juicy-tree.png" alt="img"></a></td>
<td>{&gt;&gt;Image&lt;&lt;}<a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/capped-tree.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/capped-tree.png" alt="img"></a></td>
</tr>
</tbody></table>
<p><strong>New problem</strong>: Item between <code>o</code> and <code>q</code> have no home</p>
<h4 id="Split-Nodes"><a href="#Split-Nodes" class="headerlink" title="Split Nodes"></a>Split Nodes</h4><p>If more than cap, give an item to parent:</p>
<ul>
<li>Pulling item out of juicy node, <strong>splits</strong> it into left and right</li>
<li>Parent node now has three children !</li>
</ul>
<table>
<thead>
<tr>
<th>Juicy</th>
<th>Split</th>
</tr>
</thead>
<tbody><tr>
<td>{&gt;&gt;Image&lt;&lt;}<a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/juicy-tree.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/juicy-tree.png" alt="img"></a></td>
<td>{&gt;&gt;Image&lt;&lt;}<a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/split-node.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/split-node.png" alt="img"></a></td>
</tr>
</tbody></table>
<p>This is a logically consistent and not so weird data structure.</p>
<ul>
<li>e.g.: contains(r)<ul>
<li><code>r &gt; m</code>, so go right</li>
<li><code>r &gt; o</code>, so compare vs. <code>q</code></li>
<li><code>r &gt; q</code>, so go right</li>
</ul>
</li>
</ul>
<p>Examining a node can cost $n$ compares, but it’s OK since $n$ is capped (where $n$ is the number of items in a node)</p>
<p>A parent node can have $n + 1$ children at most:</p>
<table>
<thead>
<tr>
<th>Juicy</th>
<th>Split</th>
</tr>
</thead>
<tbody><tr>
<td>{&gt;&gt;Image&lt;&lt;}<a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/juicy-tree-2.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/juicy-tree-2.png" alt="img"></a></td>
<td>{&gt;&gt;Image&lt;&lt;}<a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/split-node-2.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/split-node-2.png" alt="img"></a></td>
</tr>
</tbody></table>
<h3 id="B-Tree-1"><a href="#B-Tree-1" class="headerlink" title="B-Tree"></a>B-Tree</h3><h4 id="More-Splitting-Rules"><a href="#More-Splitting-Rules" class="headerlink" title="More Splitting Rules"></a>More Splitting Rules</h4><h5 id="Chain-Reaction"><a href="#Chain-Reaction" class="headerlink" title="Chain Reaction"></a>Chain Reaction</h5><p><a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/chain-reaction.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/chain-reaction.png" alt="chain-reaction"></a></p>
<h5 id="When-The-Root-Get-Too-Juicy"><a href="#When-The-Root-Get-Too-Juicy" class="headerlink" title="When The Root Get Too Juicy"></a>When The Root Get Too Juicy</h5><table>
<thead>
<tr>
<th>Juicy Root</th>
<th>Split Root</th>
</tr>
</thead>
<tbody><tr>
<td>{&gt;&gt;Image&lt;&lt;}<a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/juicy-root.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/juicy-root.png" alt="img"></a></td>
<td>{&gt;&gt;Image&lt;&lt;}<a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/split-root.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/split-root.png" alt="img"></a></td>
</tr>
</tbody></table>
<h4 id="Perfect-Balance-and-Logarithmic-Height"><a href="#Perfect-Balance-and-Logarithmic-Height" class="headerlink" title="Perfect Balance and Logarithmic Height"></a>Perfect Balance and Logarithmic Height</h4><p>Observation: Splitting-tree has perfect balance</p>
<ul>
<li>If we split a leaf or an internal node, the height doesn’t change</li>
<li>If we split the root, every node gets pushed down exactly by one level</li>
</ul>
<p>Punch Line: All operations have guaranteed $\Theta(log N)$ time</p>
<ul>
<li><p>$M$: Max number of <em>children</em> (1 + the item cap)</p>
</li>
<li><p>Height $H$:</p>
</li>
</ul>
<p>  Between $\log_M (N)$ and $\log_2(N)$</p>
<ul>
<li>Every node has:<ul>
<li>2 children at least: $\log_2(N) \leq H$</li>
<li>$M$ children at most: $H \leq \log_M(N)$</li>
</ul>
</li>
</ul>
<ul>
<li><p>Max number of splitting operations per insert: $\sim{H}$</p>
<ul>
<li>Time per insert/contains: $\Theta(H)$ or equivalently $\log (N)$</li>
</ul>
</li>
</ul>
<p><a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/b-trees.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/b-trees.png" alt="B-Trees"></a></p>
<h4 id="Name-Convention"><a href="#Name-Convention" class="headerlink" title="Name Convention"></a>Name Convention</h4><ul>
<li>A B-Tree of order $M = 4$ is also called a “2-3-4 Tree” or a “2-4 Tree”</li>
<li>A B-Tree of order $M = 3$ is also called a “2-3 Tree”</li>
</ul>
<p>B-Trees are most popular with very large $M$ (say thousands):</p>
<ul>
<li>Used in practical for databases and filesystems</li>
<li>Since the small $M$ tree isn’t practically useful, people usually only use the name “B-Tree” to refer to the very large $M$ case</li>
</ul>
<h2 id="Red-Black-Tree"><a href="#Red-Black-Tree" class="headerlink" title="Red-Black Tree"></a>Red-Black Tree</h2><p>We could <strong><code>use a red link</code></strong> to <strong><code>convert a 3-node</code></strong> to <strong><code>BST tree</code></strong>. </p>
<p>We choose arbitrarily to make the left element a child of the right one. </p>
<p>The structure is called <strong>left-leaning red-black trees</strong> (LLRB).</p>
<p><a href="https://camo.githubusercontent.com/d59e7282bf26538f9f4c84e03ab97d277f8331f6/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30332d3036253230617425323031302e35362e3531253230504d2e706e67" target="_blank" rel="noopener"><img src="https://camo.githubusercontent.com/d59e7282bf26538f9f4c84e03ab97d277f8331f6/68747470733a2f2f6a6f73686875672e676974626f6f6b732e696f2f6875673631622f636f6e74656e742f6173736574732f53637265656e25323053686f74253230323031392d30332d3036253230617425323031302e35362e3531253230504d2e706e67" alt="Red Link"></a></p>
<h4 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h4><ul>
<li>Left-Leaning Red-Black trees have a 1-1 correspondence with 2-3 trees.</li>
<li>No node has 2 red links.</li>
<li>There are no red right-links.</li>
<li>Every path from root to leaf has same number of black links.</li>
<li>Height is no more than 2x height of corresponding 2-3 tree.</li>
</ul>
<h4 id="Inserting-into-LLRB"><a href="#Inserting-into-LLRB" class="headerlink" title="Inserting into LLRB"></a>Inserting into LLRB</h4><ul>
<li>While inserting, use a red link.</li>
<li>If there is a right leaning “3-node”, rotate left the appropriate node to fix.</li>
<li>If there are two consecutive left links, rotate right the appropriate node to fix.</li>
<li>If there are any nodes with two red children, color flip the node to emulate the split operation.</li>
</ul>
<h4 id="Runtime"><a href="#Runtime" class="headerlink" title="Runtime"></a>Runtime</h4><p>Because a LLRB tree has a 1-1 correspondence with a 2-3 tree and will always remain within 2x the height of its 2-3 tree, the runtimes of the operations will take <code>log N</code> time.</p>
<h3 id="Motivation-for-Red-Black-Tree"><a href="#Motivation-for-Red-Black-Tree" class="headerlink" title="Motivation for Red-Black Tree"></a>Motivation for Red-Black Tree</h3><p>2-3 (or 2-3-4) Tree is a real pain to implement, and suffer from performance issues:</p>
<ul>
<li>Maintaining different node types</li>
<li>Interconversion of nodes between 2-nodes and 3-nodes</li>
<li>Walking up the tree to split nodes</li>
</ul>
<blockquote>
<p>Beautiful algorithms are, unfortunately, not always the most useful.</p>
<blockquote>
<p>Donald Knuth</p>
</blockquote>
</blockquote>
<p>Clever (and strange idea): <em>Build BST so that it is isometric (i.e. structurally identical) to a 2-3 tree</em></p>
<ul>
<li>Use rotations to ensure the isometry</li>
<li>Since 2-3 trees are balanced, rotations on BST will ensure balance</li>
</ul>
<h3 id="Representing-2-3-Tree"><a href="#Representing-2-3-Tree" class="headerlink" title="Representing 2-3 Tree"></a>Representing 2-3 Tree</h3><p><a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/representing-2-3-tree-1.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/representing-2-3-tree-1.png" alt="representing-2-3-tree-1"></a></p>
<p><a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/representing-2-3-tree-2.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/representing-2-3-tree-2.png" alt="representing-2-3-tree-2"></a></p>
<h3 id="Left-Leaning-Red-Black-Binary-Search-Tree-LLRB"><a href="#Left-Leaning-Red-Black-Binary-Search-Tree-LLRB" class="headerlink" title="Left-Leaning Red-Black Binary Search Tree (LLRB)"></a>Left-Leaning Red-Black Binary Search Tree (LLRB)</h3><p>Any BST that maintains an isometry with a 2-3 Tree has these properties:</p>
<ol>
<li>No node has two red links (otherwise it’d be like a 4 nodes)</li>
<li>Every path from root to a leaf has same number of black links: “Black balanced”</li>
<li>Red links lean left (just by convention)</li>
<li>Also called a “Left-Leaning Red-Black Binary Search Tree (LLRB)”</li>
</ol>
<table>
<thead>
<tr>
<th>2-3 Tree</th>
<th>LLRB</th>
</tr>
</thead>
<tbody><tr>
<td>{&gt;&gt;Image&lt;&lt;}<a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/2-3-tree.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/2-3-tree.png" alt="img"></a></td>
<td><a href="https://github.com/aviatesk/cs61b-sp18/blob/master/assets/week8/llrb.png" target="_blank" rel="noopener"><img src="https://github.com/aviatesk/cs61b-sp18/raw/master/assets/week8/llrb.png" alt="img"></a>{&gt;&gt;Image&lt;&lt;}</td>
</tr>
</tbody></table>
<h4 id="Interesting-Facts"><a href="#Interesting-Facts" class="headerlink" title="Interesting Facts"></a>Interesting Facts</h4><p>For any 2-3 Tree (which is balanced), there exists a corresponding LLRB that has depth no more than 2 times the depth of the original 2-3 Tree</p>
<ul>
<li>Because of Rule.1 above</li>
</ul>
<p>With a HUGE dose of cleverness can use rotations to maintain isometry after each insertion and deletion !</p>
<h3 id="Summary-1"><a href="#Summary-1" class="headerlink" title="Summary"></a>Summary</h3><p>2-3 and 2-3-4 Trees have perfect balance:</p>
<ul>
<li>Height is guaranteed logarithmic</li>
<li>After insert/delete, at most 1 split operation per level of the tree<ul>
<li>Since height is logarithmic, we have $O(\log N)$ splits</li>
<li>insert/delete are therefore $O(\log N)$</li>
</ul>
</li>
<li>But hard to implement</li>
</ul>
<p>LLRB mimics 2-3 Tree behavior using tree rotation and color flipping</p>
<ul>
<li>Height is guaranteed logarithmic</li>
<li>After insert/delete, at most 1 color flip or rotation per level of the tree<ul>
<li>Since height is logarithmic, we have $O(\log N)$ flips/rotations</li>
<li>insert/delete operations are therefore $O(\log N)$</li>
</ul>
</li>
<li>Easier to implement, constant factor faster than 2-3 or 2-3-4 tree</li>
</ul>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/cs/" rel="tag"># cs</a>
              <a href="/tags/java/" rel="tag"># java</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/08/15/cs61b%20week7/" rel="prev" title="cs61b week7">
      <i class="fa fa-chevron-left"></i> cs61b week7
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/08/24/AWS/" rel="next" title="AWS Day01">
      AWS Day01 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#cs61b-week8"><span class="nav-number">1.</span> <span class="nav-text">cs61b week8</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Disjoint-Sets"><span class="nav-number">2.</span> <span class="nav-text">Disjoint Sets</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Dynamic-Connectivity-Problem"><span class="nav-number">2.1.</span> <span class="nav-text">Dynamic Connectivity Problem</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Introduction"><span class="nav-number">2.1.1.</span> <span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Disjoint-Set-ADT"><span class="nav-number">2.1.2.</span> <span class="nav-text">Disjoint Set ADT</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Naive-Approach"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">Naive Approach:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Better-Approach"><span class="nav-number">2.1.2.2.</span> <span class="nav-text">Better Approach:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Quick-Find"><span class="nav-number">2.1.3.</span> <span class="nav-text">Quick Find</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Quick-Union"><span class="nav-number">2.1.4.</span> <span class="nav-text">Quick Union</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Weighted-Quick-Union"><span class="nav-number">2.1.5.</span> <span class="nav-text">Weighted Quick Union</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Performance-Summary"><span class="nav-number">2.1.6.</span> <span class="nav-text">Performance Summary</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Appendix-Weighted-QuickUnion-DS-With-Path-Compression"><span class="nav-number">2.1.7.</span> <span class="nav-text">Appendix - Weighted QuickUnion DS With Path Compression</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ADTs-Sets-Maps-BSTs"><span class="nav-number">2.2.</span> <span class="nav-text">ADTs, Sets, Maps, BSTs</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Abstract-Data-Type"><span class="nav-number">2.2.1.</span> <span class="nav-text">Abstract Data Type</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Stacks"><span class="nav-number">2.2.1.1.</span> <span class="nav-text">Stacks:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Lists"><span class="nav-number">2.2.1.2.</span> <span class="nav-text">Lists:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Sets"><span class="nav-number">2.2.1.3.</span> <span class="nav-text">Sets:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Maps"><span class="nav-number">2.2.1.4.</span> <span class="nav-text">Maps:</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Tree"><span class="nav-number">3.</span> <span class="nav-text">Tree</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Binary-Search-Trees"><span class="nav-number">3.1.</span> <span class="nav-text">Binary Search Trees</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Properties-of-trees"><span class="nav-number">3.1.1.</span> <span class="nav-text">Properties of trees</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Binary-Trees"><span class="nav-number">3.1.1.1.</span> <span class="nav-text">Binary Trees:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Binary-Search-Trees-1"><span class="nav-number">3.1.1.2.</span> <span class="nav-text">Binary Search Trees:</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Search"><span class="nav-number">3.1.2.</span> <span class="nav-text">Search</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Insert"><span class="nav-number">3.1.3.</span> <span class="nav-text">Insert</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Delete"><span class="nav-number">3.1.4.</span> <span class="nav-text">Delete</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-cases"><span class="nav-number">3.1.4.1.</span> <span class="nav-text">3 cases:</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#case-1-No-children"><span class="nav-number">3.1.4.2.</span> <span class="nav-text">case 1: No children</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#case-2-1-child"><span class="nav-number">3.1.4.3.</span> <span class="nav-text">case 2: 1 child</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#case-3-2-children"><span class="nav-number">3.1.4.4.</span> <span class="nav-text">case 3: 2 children</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BSTs-as-Sets-and-Maps"><span class="nav-number">3.1.5.</span> <span class="nav-text">BSTs as Sets and Maps</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Height-of-BST"><span class="nav-number">3.1.6.</span> <span class="nav-text">Height of BST</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BST-Performance"><span class="nav-number">3.1.7.</span> <span class="nav-text">BST Performance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Random-Insertion"><span class="nav-number">3.1.8.</span> <span class="nav-text">Random Insertion</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Random-Deletion"><span class="nav-number">3.1.9.</span> <span class="nav-text">Random Deletion</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Summary"><span class="nav-number">3.2.</span> <span class="nav-text">Summary</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Balanced-Search-Tree"><span class="nav-number">4.</span> <span class="nav-text">Balanced Search Tree</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Rotating-Trees"><span class="nav-number">4.0.1.</span> <span class="nav-text">Rotating Trees</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#B-Tree"><span class="nav-number">4.1.</span> <span class="nav-text">B-Tree</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#B-tree-Runtime-Analysis"><span class="nav-number">4.1.1.</span> <span class="nav-text">B-tree Runtime Analysis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Search-Trees"><span class="nav-number">4.1.2.</span> <span class="nav-text">Search Trees</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Why-B-Tree"><span class="nav-number">4.1.2.0.0.1.</span> <span class="nav-text">Why B-Tree ?</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Road-to-Splitting-Tree-A-K-A-B-Tree"><span class="nav-number">4.1.3.</span> <span class="nav-text">Road to Splitting Tree (A.K.A. B-Tree)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Overstuff-Nodes"><span class="nav-number">4.1.3.1.</span> <span class="nav-text">Overstuff Nodes</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Cap-Nodes"><span class="nav-number">4.1.3.2.</span> <span class="nav-text">Cap Nodes</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Split-Nodes"><span class="nav-number">4.1.3.3.</span> <span class="nav-text">Split Nodes</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#B-Tree-1"><span class="nav-number">4.1.4.</span> <span class="nav-text">B-Tree</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#More-Splitting-Rules"><span class="nav-number">4.1.4.1.</span> <span class="nav-text">More Splitting Rules</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Chain-Reaction"><span class="nav-number">4.1.4.1.1.</span> <span class="nav-text">Chain Reaction</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#When-The-Root-Get-Too-Juicy"><span class="nav-number">4.1.4.1.2.</span> <span class="nav-text">When The Root Get Too Juicy</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Perfect-Balance-and-Logarithmic-Height"><span class="nav-number">4.1.4.2.</span> <span class="nav-text">Perfect Balance and Logarithmic Height</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Name-Convention"><span class="nav-number">4.1.4.3.</span> <span class="nav-text">Name Convention</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Red-Black-Tree"><span class="nav-number">4.2.</span> <span class="nav-text">Red-Black Tree</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Properties"><span class="nav-number">4.2.0.1.</span> <span class="nav-text">Properties</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Inserting-into-LLRB"><span class="nav-number">4.2.0.2.</span> <span class="nav-text">Inserting into LLRB</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Runtime"><span class="nav-number">4.2.0.3.</span> <span class="nav-text">Runtime</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Motivation-for-Red-Black-Tree"><span class="nav-number">4.2.1.</span> <span class="nav-text">Motivation for Red-Black Tree</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Representing-2-3-Tree"><span class="nav-number">4.2.2.</span> <span class="nav-text">Representing 2-3 Tree</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Left-Leaning-Red-Black-Binary-Search-Tree-LLRB"><span class="nav-number">4.2.3.</span> <span class="nav-text">Left-Leaning Red-Black Binary Search Tree (LLRB)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Interesting-Facts"><span class="nav-number">4.2.3.1.</span> <span class="nav-text">Interesting Facts</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Summary-1"><span class="nav-number">4.2.4.</span> <span class="nav-text">Summary</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Dejavu"
      src="/images/v2-f8df7dc974a522b119a385a0fc09311e_xll.jpg">
  <p class="site-author-name" itemprop="name">Dejavu</p>
  <div class="site-description" itemprop="description">Stay gold</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">72</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Dejavu-19" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Dejavu-19" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/liu.kunling19@gmail.com" title="E-Mail → liu.kunling19@gmail.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2019 – 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Dejavu</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/three-waves.min.js"></script>
    <script defer src="/lib/three/canvas_lines.min.js"></script>


  















  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"right","width":200,"height":400},"mobile":{"show":false},"log":false});</script></body>
</html>
